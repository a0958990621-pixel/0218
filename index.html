<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>çµ¦ æ›¾â˜ï¸ğŸ’— çš„æ•…äº‹æ›¸ - ç¬¬ä¸€å†Š</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap');
        :root { --primary: #8d6e63; --accent: #e6beae; --bg: #fdfaf7; --text: #2c2c2c; --polaroid: #ffffff; --soft-red: #e63946; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: var(--bg); font-family: "PingFang TC", sans-serif; overflow: hidden; color: var(--text); }
        
        #login-overlay { position: fixed; inset: 0; background: var(--bg); display: flex; justify-content: center; align-items: center; z-index: 9999; transition: 0.8s; }
        .login-box { text-align: center; background: white; padding: 50px 30px; border-radius: 40px; box-shadow: 0 25px 60px rgba(0,0,0,0.1); width: 85%; max-width: 380px; }
        #pwd { padding: 15px; font-size: 20px; text-align: center; border: none; border-bottom: 2.5px solid #eee; outline: none; width: 100%; letter-spacing: 8px; margin-top: 20px; }
        .login-btn { margin-top: 30px; background: var(--primary); color: white; border: none; padding: 16px 50px; border-radius: 50px; cursor: pointer; font-size: 18px; width: 100%; transition: 0.3s; }

        .book { position: relative; width: 100%; height: 100vh; perspective: 2500px; display: none; }
        .page { position: absolute; width: 100%; height: 100%; top: 0; left: 0; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; background: var(--bg); transform-origin: left center; transition: transform 1s cubic-bezier(0.645, 0.045, 0.355, 1), opacity 0.8s ease; backface-visibility: hidden; z-index: var(--z); }
        .page.flipped { transform: rotateY(-170deg) translateX(-50px); opacity: 0; pointer-events: none; }
        
        .polaroid { background: var(--polaroid); padding: 10px 10px 100px 10px; box-shadow: 0 15px 45px rgba(0,0,0,0.1); transform: rotate(-1deg); max-width: 95%; width: 340px; position: relative; border: 1px solid rgba(0,0,0,0.02); }
        .media-container { width: 100%; background: #fcfcfc; overflow: hidden; position: relative; display: flex; justify-content: center; align-items: center; min-height: 200px; }
        .scratch-overlay { position: absolute; inset: 0; background: linear-gradient(135deg, #fce4ec 0%, #f3e5f5 100%); backdrop-filter: blur(5px); z-index: 5; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: 0.8s; }
        .scratch-overlay::after { content: "TAP TO REVEAL âœ¨"; color: #ad8a8a; font-size: 14px; }
        .scratch-overlay.revealed { opacity: 0; pointer-events: none; }
        
        video, img { max-width: 100%; max-height: 38vh; object-fit: contain; }
        .caption-tag { position: absolute; bottom: 15px; left: 0; width: 100%; text-align: center; font-size: 18px; color: #4a4a4a; line-height: 1.5; font-family: 'Noto Serif TC', serif; }
        .date-label { font-family: 'Noto Serif TC', serif; font-weight: 700; font-size: 1.3rem; color: var(--primary); margin-bottom: 20px; border-bottom: 2px solid var(--accent); padding-bottom: 5px; }

        .nav-controls { position: fixed; bottom: 95px; width: 100%; display: flex; justify-content: center; gap: 30px; z-index: 1000; }
        .btn { background: white; color: var(--primary); border: 1.5px solid var(--accent); padding: 12px 35px; border-radius: 50px; cursor: pointer; font-weight: 600; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        
        #final-video-container { display: none; position: fixed; inset: 0; background: black; z-index: 9500; justify-content: center; align-items: center; opacity: 0; transition: 0.6s; }
        .video-wrapper { position: relative; width: 95%; padding-bottom: 56.25%; }
        .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .close-video { position: absolute; top: 40px; right: 20px; color: white; font-size: 40px; cursor: pointer; z-index: 9501; width: 60px; height: 60px; display: flex; justify-content: center; align-items: center; }

        .jump-btn { background: var(--soft-red) !important; color: white !important; border: none !important; font-size: 1.2rem !important; padding: 15px 30px !important; text-decoration: none; display: inline-block; border-radius: 50px; margin-top: 20px; box-shadow: 0 10px 25px rgba(230,57,70,0.3); }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .heart-pulse { animation: pulse 2s infinite ease-in-out; }
    </style>
</head>
<body onclick="wakeUpAudio()">
    <audio id="music-1" loop preload="auto"><source src="Anti-Romantic.mp3"></audio>

    <div id="login-overlay">
        <div class="login-box">
            <h2 style="color:var(--primary); font-family: 'Noto Serif TC', serif;">ğŸ”’ æˆ‘å€‘çš„å›æ†¶ç›¸ç°¿</h2>
            <input type="password" id="pwd" maxlength="8" placeholder="YYYYMMDD" autocomplete="off">
            <button class="login-btn" onclick="checkPwd()">é–‹å•Ÿå›æ†¶</button>
        </div>
    </div>

    <div id="final-video-container">
        <div class="close-video" onclick="closeFinalVideo()">âœ•</div>
        <div class="video-wrapper" id="video-wrapper"></div>
    </div>

    <div class="book" id="myBook">
        <div class="page" style="--z: 100;"><div class="date-label">2024 / 10 / 08</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><video class="page-video" data-src="é¢è©¦.mp4" controls playsinline></video></div><div class="caption-tag">åˆæ¬¡è¦‹é¢<br>å°±æ±ºå®šè¦é¸ä½ äº†</div></div></div>
        <div class="page" style="--z: 99;"><div class="date-label">2025 / 01 / 17</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><img src="0117.jpg"></div><div class="caption-tag">é€™æ˜¯æˆ‘å€‘çš„<br>ç¬¬ä¸€å¼µåˆç…§ã„›</div></div></div>
        <div class="page" style="--z: 98;"><div class="date-label">2025 / 01 / 23</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><img src="0123.jpg"></div><div class="caption-tag">è·Œå€’çš„é‚£å¤©<br>æœˆè€åœ¨ç‰½ç·šå•Šå•Šå•Š</div></div></div>
        <div class="page" style="--z: 97;"><div class="date-label">2025 / 01 / 24</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><video class="page-video" data-src="0124.mp4" controls playsinline></video></div><div class="caption-tag">å¾¹åº•æšˆèˆ¹çš„é‚£ä¸€å¤©</div></div></div>
        <div class="page" style="--z: 96;"><div class="date-label">2025 / 01 / 31</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><video class="page-video" data-src="0131.mp4" controls playsinline></video></div><div class="caption-tag">ç¬¬ä¸€æ¬¡å‡ºå»ç©å°±è·³æ—©æ“</div></div></div>
        <div class="page" style="--z: 95;"><div class="date-label">2025 / 02 / 03</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><video class="page-video" data-src="0203.mp4" controls playsinline></video></div><div class="caption-tag">æ„›æƒ…çš„å¤§å£è›‹</div></div></div>
        <div class="page" style="--z: 94;"><div class="date-label">2025 / 02 / 08</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><video class="page-video" data-src="0208.mp4" controls playsinline></video></div><div class="caption-tag">è€ç™½ç—´æ’åˆ°é ­</div></div></div>
        <div class="page" style="--z: 93;"><div class="date-label">2025 / 02 / 10</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><video class="page-video" data-src="0210.mp4" controls playsinline></video></div><div class="caption-tag">ç¬‘ç¬‘ç¾Šç¦®ç‰©å–œæ­¡å—</div></div></div>
        <div class="page" style="--z: 92;"><div class="date-label">2025 / 02 / 12</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><video class="page-video" data-src="0212.mp4" controls playsinline></video></div><div class="caption-tag">å°å—é¤µåœ°ç“œçƒ</div></div></div>
        <div class="page" style="--z: 91;"><div class="date-label">2025 / 02 / 21</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><video class="page-video" data-src="0221.mp4" controls playsinline></video></div><div class="caption-tag">å¹¹å˜›ä¾†å¤§å·¨è›‹çªè¥²æˆ‘å•¦</div></div></div>
        <div class="page" style="--z: 90;"><div class="date-label">2025 / 02 / 25</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><img src="0225.jpg"></div><div class="caption-tag">æˆ‘å€‘ä¸€èµ·å»å¤§å·¨è›‹ çœ‹ WBCQ</div></div></div>
        <div class="page" style="--z: 89;"><div class="date-label">2025 / 03 / 08</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><img src="0308.jpg"></div><div class="caption-tag">å·æ‹å¯¶å¯¶ç¡è¦ºå˜¿å˜¿å˜¿</div></div></div>
        <div class="page" style="--z: 88;"><div class="date-label">2025 / 04 / 02</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><img src="0402.jpg"></div><div class="caption-tag">å°ç£ç¥­å¥½é›£éå•Šå•Šå•Š</div></div></div>
        <div class="page" style="--z: 87;"><div class="date-label">2025 / 04 / 19</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><img src="0419.jpg"></div><div class="caption-tag">æ·¨ç˜çš„æ™‚å€™å·å·æŠ“æˆ‘ã„›</div></div></div>
        <div class="page" style="--z: 86;"><div class="date-label">2025 / 04 / 21</div><div class="polaroid"><div class="media-container"><div class="scratch-overlay" onclick="reveal(this)"></div><img src="0421.jpg"></div><div class="caption-tag">å¯¶å¯¶ä¸Šå°å”±æ­Œå•Šå•Šå•Š</div></div></div>

        <div class="page" style="--z: 50;" id="trigger-page">
            <div class="date-label">2025 / 04 / 24</div>
            <div id="flower-zone" style="text-align:center;">
                <div id="flower-main" style="font-size:80px; cursor:pointer;" class="heart-pulse" onclick="playSurpriseVideo()">ğŸ’</div>
                <div id="after-video-ui" style="display:none;">
                    <a href="love.html" class="jump-btn">ğŸ’– é–‹å•Ÿæˆ‘å€‘çš„ç”œèœœæ–°ç¯‡ç« </a>
                </div>
                <p id="trigger-text" style="color:var(--primary); margin-top: 25px; font-weight: 700; font-size: 20px;">3:14åˆ†æˆ‘å€‘åœ¨ä¸€èµ·æƒ¹<br>çœ‹æœ€é‡è¦çš„æ™‚åˆ»</p>
            </div>
        </div>
        <div class="nav-controls"><button class="btn" id="prevBtn" onclick="prevPage()" disabled>PREV</button><button class="btn" id="nextBtn" onclick="nextPage()">NEXT</button></div>
    </div>

    <script>
        let curr = 0; const pages = document.querySelectorAll('.page');
        const m1 = document.getElementById('music-1');
        let bookStarted = false;

        window.onload = () => {
            document.getElementById('login-overlay').style.display = 'flex';
            document.getElementById('pwd').value = "";
            m1.load();
        };

        function reveal(overlay) { overlay.classList.add('revealed'); wakeUpAudio(); }
        function wakeUpAudio() { if (bookStarted && m1.paused) m1.play().catch(()=>{}); }

        function checkPwd() {
            if (document.getElementById('pwd').value === '20250424') {
                m1.play().catch(()=>{});
                document.getElementById('login-overlay').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('login-overlay').style.display = 'none';
                    document.getElementById('myBook').style.display = 'block';
                    bookStarted = true; loadVideo(0);
                }, 800);
            } else { alert("å¯†ç¢¼éŒ¯èª¤å–”ï¼"); }
        }

        function loadVideo(index) {
            const v = pages[index].querySelector('.page-video');
            if(v) { 
                if(!v.src || v.src === "") { v.src = v.getAttribute('data-src'); v.load(); }
                v.onplay = () => m1.pause();
                v.onended = v.onpause = wakeUpAudio;
            }
        }

        function nextPage() { if (curr < pages.length - 1) { const v = pages[curr].querySelector('video'); if(v) v.pause(); pages[curr].classList.add('flipped'); curr++; loadVideo(curr); updateButtons(); wakeUpAudio(); } }
        function prevPage() { if (curr > 0) { const v = pages[curr].querySelector('video'); if(v) v.pause(); curr--; pages[curr].classList.remove('flipped'); loadVideo(curr); updateButtons(); wakeUpAudio(); } }
        function updateButtons() { document.getElementById('prevBtn').disabled = (curr === 0); document.getElementById('nextBtn').disabled = (curr === pages.length - 1 || pages[curr].id === "trigger-page"); }
        
        function playSurpriseVideo() {
            m1.pause(); // YT é–‹å§‹æ™‚èƒŒæ™¯éŸ³å¾¹åº•æš«åœ
            document.getElementById('video-wrapper').innerHTML = `<iframe id="yt-frame" src="https://www.youtube.com/embed/e4bQwcrrN9A?autoplay=1&enablejsapi=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
            document.getElementById('final-video-container').style.display = 'flex';
            setTimeout(()=>document.getElementById('final-video-container').style.opacity = '1', 50);
        }

        function closeFinalVideo() {
            document.getElementById('video-wrapper').innerHTML = "";
            document.getElementById('final-video-container').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('final-video-container').style.display = 'none';
                document.getElementById('flower-main').style.display = "none";
                document.getElementById('trigger-text').style.display = "none";
                document.getElementById('after-video-ui').style.display = "block";
                // é—œé–‰å¾Œæ›äº”æœˆå¤©ä¸”ç§’æ’­
                m1.src = "äº”æœˆå¤©-ç‚ºä½ å¯«ä¸‹é€™é¦–æƒ…æ­Œ.mp3"; m1.load(); m1.play().catch(()=>{});
            }, 600);
        }

        window.addEventListener('keydown', (e) => {
            if (!bookStarted) return;
            if ((e.key === "ArrowRight" || e.key === " ") && (pages[curr].id !== "trigger-page")) nextPage();
            else if (e.key === "ArrowLeft") prevPage();
        });
        document.getElementById('pwd').addEventListener('keypress', (e) => { if (e.key === 'Enter') checkPwd(); });
    </script>
</body>
</html>
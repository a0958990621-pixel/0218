<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çµ¦ æ›¾â˜ï¸ğŸ’— çš„æ•…äº‹æ›¸</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap');

        :root { 
            --primary: #8d6e63; 
            --accent: #e6beae;
            --bg: #fdfaf7; 
            --text: #4a4a4a;
            --polaroid: #ffffff;
            --soft-red: #e63946;
        }

        * { box-sizing: border-box; }
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: var(--bg); 
            font-family: "PingFang TC", "Heiti TC", "Microsoft JhengHei", sans-serif; 
            overflow: hidden; 
            color: var(--text);
            -webkit-font-smoothing: antialiased;
        }

        /* --- ç™»å…¥è§£é–å±¤ --- */
        #login-overlay { 
            position: fixed; inset: 0; background: var(--bg); 
            display: flex; justify-content: center; align-items: center; 
            z-index: 3000; transition: 1s ease-in-out; 
        }
        .login-box { 
            text-align: center; background: white; padding: 50px 30px; border-radius: 40px; 
            box-shadow: 0 25px 60px rgba(176, 137, 104, 0.15); width: 85%; max-width: 380px;
        }
        #pwd { 
            padding: 15px; font-size: 18px; text-align: center; border: none; 
            border-bottom: 2.5px solid #eee; outline: none; width: 100%; letter-spacing: 6px;
            margin-top: 30px; transition: 0.3s;
        }
        #pwd:focus { border-bottom-color: var(--accent); }
        .login-btn {
            margin-top: 35px; background: var(--primary); color: white; border: none; 
            padding: 14px 50px; border-radius: 50px; cursor: pointer; font-size: 16px; 
            letter-spacing: 3px; transition: 0.3s; width: 100%;
        }

        /* --- 3D ç¿»é æ›¸ --- */
        .book { position: relative; width: 100%; height: 100vh; perspective: 2500px; display: none; }
        .page {
            position: absolute; width: 100%; height: 100%; top: 0; left: 0; 
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
            padding: 30px; background: var(--bg);
            transform-origin: left center;
            transition: transform 1.5s cubic-bezier(0.645, 0.045, 0.355, 1), opacity 1.2s ease;
            backface-visibility: hidden;
            z-index: var(--z);
        }
        .page.flipped { transform: rotateY(-170deg) translateX(-50px); opacity: 0; pointer-events: none; }

        /* --- æ‹ç«‹å¾—é«˜ç´šæ„Ÿ --- */
        .polaroid { 
            background: var(--polaroid); padding: 14px 14px 75px 14px; 
            box-shadow: 5px 15px 45px rgba(0,0,0,0.08); transform: rotate(-1.5deg);
            max-width: 95%; width: 360px; position: relative; border: 1px solid rgba(0,0,0,0.02);
        }
        .polaroid::before {
            content: ""; position: absolute; top: -15px; left: 50%; transform: translateX(-50%);
            width: 100px; height: 30px; background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(3px); border: 1px solid rgba(0,0,0,0.03); z-index: 10;
        }
        .media-inner { width: 100%; background: #fcfcfc; overflow: hidden; display: flex; justify-content: center; align-items: center; min-height: 250px; }
        video, img { max-width: 100%; max-height: 55vh; object-fit: contain; display: block; }
        .caption-tag { position: absolute; bottom: 28px; left: 0; width: 100%; text-align: center; font-size: 16px; color: #777; letter-spacing: 5px; font-weight: 500;}
        .date-label { font-family: 'Noto Serif TC', serif; font-weight: 700; font-size: 1.3rem; color: var(--primary); margin-bottom: 35px; border-bottom: 1.5px solid var(--accent); padding-bottom: 5px; }

        /* å°è¦½ */
        .nav-controls { position: fixed; bottom: 40px; width: 100%; display: flex; justify-content: center; gap: 30px; z-index: 1000; }
        .btn { background: white; color: var(--primary); border: 1px solid var(--accent); padding: 10px 30px; border-radius: 50px; cursor: pointer; font-size: 14px; letter-spacing: 2px; transition: 0.3s; }
        .btn:disabled { opacity: 0; pointer-events: none; }

        /* YouTube å½±ç‰‡å±¤ */
        #final-video-container {
            display: none; position: fixed; inset: 0; background: black; z-index: 4000;
            justify-content: center; align-items: center; opacity: 0; transition: 1s;
        }
        .video-wrapper { position: relative; width: 100%; padding-bottom: 56.25%; height: 0; }
        .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .close-video { position: absolute; top: 30px; right: 30px; color: white; font-size: 35px; cursor: pointer; z-index: 4001; }

        /* å‘Šç™½ä¿¡å¡ç‰‡ */
        #letter { display: none; background: white; padding: 45px 35px; border-radius: 20px; text-align: left; margin-top: 20px; opacity: 0; max-width: 420px; border-left: 6px solid var(--accent); box-shadow: 0 10px 30px rgba(0,0,0,0.05);}
        #letter p { margin-bottom: 18px; opacity: 0; transform: translateY(10px); transition: 1.5s; font-family: 'Noto Serif TC', serif; line-height: 2; font-size: 18px; }
        .show-p { opacity: 1 !important; transform: translateY(0) !important; }

        .call-card { background: #1c1c1c; color: #eee; padding: 50px 30px; border-radius: 50px; text-align: center; width: 85%; max-width: 350px; }
        @keyframes pulse { 0% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(1); opacity: 0.8; } }
        .heart-pulse { animation: pulse 2s infinite ease-in-out; }
    </style>
</head>
<body>

    <audio id="music-1" loop preload="auto"><source src="Anti-Romantic.mp3"></audio>
    <audio id="music-2" loop preload="auto"><source src="äº”æœˆå¤©-ç‚ºä½ å¯«ä¸‹é€™é¦–æƒ…æ­Œ.mp3"></audio>

    <div id="login-overlay">
        <div class="login-box">
            <h2 style="color:var(--primary); font-family: 'Noto Serif TC', serif; font-weight: 700;">ğŸ”’ æˆ‘å€‘çš„å›æ†¶ç›¸ç°¿</h2>
            <input type="password" id="pwd" maxlength="8" placeholder="è¼¸å…¥åœ¨ä¸€èµ·çš„é‚£å¤©">
            <button class="login-btn" onclick="checkPwd()">é–‹å•Ÿå›æ†¶</button>
            <p style="font-size: 12px; color: #aaa; margin-top: 15px;">Hint: YYYYMMDD</p>
        </div>
    </div>

    <div id="final-video-container">
        <div class="close-video" onclick="closeFinalVideo()">âœ•</div>
        <div class="video-wrapper" id="video-wrapper"></div>
    </div>

    <div class="book" id="myBook">
        <div class="page" style="--z: 30;"><div class="date-label">2024å¹´10æœˆ08æ—¥</div><div class="polaroid"><div class="media-inner"><video class="page-video" controls playsinline><source src="é¢è©¦.mp4"></video></div><div class="caption-tag">åˆæ¬¡è¦‹é¢</div></div></div>
        <div class="page" style="--z: 29;"><div class="date-label">2025å¹´01æœˆ17æ—¥</div><div class="polaroid" style="transform: rotate(1.5deg);"><div class="media-inner"><img src="0117.jpg"></div><div class="caption-tag">ç¬¬ä¸€å¼µåˆç…§</div></div></div>
        <div class="page" style="--z: 28;"><div class="date-label">2025å¹´01æœˆ23æ—¥</div><div class="polaroid" style="transform: rotate(-2deg);"><div class="media-inner"><img src="0123.jpg"></div><div class="caption-tag">è·Œå€’çš„é‚£å¤©</div></div></div>
        <div class="page" style="--z: 27;"><div class="date-label">2025å¹´01æœˆ24æ—¥</div><div class="polaroid"><div class="media-inner"><video class="page-video" controls playsinline><source src="0124.mp4"></video></div><div class="caption-tag">å¾¹åº•æšˆèˆ¹äº†</div></div></div>
        <div class="page" style="--z: 26;"><div class="date-label">2025å¹´01æœˆ31æ—¥</div><div class="polaroid" style="transform: rotate(-1.5deg);"><div class="media-inner"><video class="page-video" controls playsinline><source src="0131.mp4"></video></div><div class="caption-tag">ç¬¬ä¸€æ¬¡å‡ºéŠè·³æ—©æ“</div></div></div>
        <div class="page" style="--z: 25;"><div class="date-label">2025å¹´02æœˆ03æ—¥</div><div class="polaroid"><div class="media-inner"><video class="page-video" controls playsinline><source src="0203.mp4"></video></div><div class="caption-tag">æ„›æƒ…çš„å¤§å£è›‹</div></div></div>
        <div class="page" style="--z: 24;"><div class="date-label">2025å¹´02æœˆ08æ—¥</div><div class="polaroid" style="transform: rotate(2deg);"><div class="media-inner"><video class="page-video" controls playsinline><source src="0208.mp4"></video></div><div class="caption-tag">é›²æ—ç©åˆæ’åˆ°é ­</div></div></div>
        <div class="page" style="--z: 23;"><div class="date-label">2025å¹´02æœˆ10æ—¥</div><div class="polaroid"><div class="media-inner"><video class="page-video" controls playsinline><source src="0210.mp4"></video></div><div class="caption-tag">ç¬‘ç¬‘ç¾Šç”Ÿæ—¥ç¦®ç‰©</div></div></div>
        <div class="page" style="--z: 22;"><div class="date-label">2025å¹´02æœˆ12æ—¥</div><div class="polaroid" style="transform: rotate(-2deg);"><div class="media-inner"><video class="page-video" controls playsinline><source src="0212.mp4"></video></div><div class="caption-tag">å·å·é¤µåœ°ç“œçƒ</div></div></div>
        <div class="page" style="--z: 21;"><div class="date-label">2025å¹´02æœˆ21æ—¥</div><div class="polaroid"><div class="media-inner"><video class="page-video" controls playsinline><source src="0221.mp4"></video></div><div class="caption-tag">å¤§å·¨è›‹çªæ“Š</div></div></div>
        <div class="page" style="--z: 20;"><div class="date-label">2025å¹´02æœˆ25æ—¥</div><div class="polaroid" style="transform: rotate(1.5deg);"><div class="media-inner"><img src="0225.jpg"></div><div class="caption-tag">è´çƒçš„é‚£ä¸€åˆ»</div></div></div>
        <div class="page" style="--z: 19;"><div class="date-label">2025å¹´03æœˆ08æ—¥</div><div class="polaroid"><div class="media-inner"><img src="0308.jpg"></div><div class="caption-tag">åŸºéš†çœ‹æµ·</div></div></div>
        <div class="page" style="--z: 18;"><div class="date-label">2025å¹´04æœˆ02æ—¥</div><div class="polaroid" style="transform: rotate(-1.5deg);"><div class="media-inner"><img src="0402.jpg"></div><div class="caption-tag">å°ç£ç¥­çš„éºæ†¾</div></div></div>
        <div class="page" style="--z: 17;"><div class="date-label">2025å¹´04æœˆ19æ—¥</div><div class="polaroid"><div class="media-inner"><img src="0419.jpg"></div><div class="caption-tag">æ·¨ç˜çš„å¥½æ›–æ˜§</div></div></div>
        <div class="page" style="--z: 16;"><div class="date-label">2025å¹´04æœˆ21æ—¥</div><div class="polaroid" style="transform: rotate(1.5deg);"><div class="media-inner"><img src="0421.jpg"></div><div class="caption-tag">é™ªæˆ‘å®Œæˆé‡è¦æ™‚åˆ»</div></div></div>

        <div class="page" style="--z: 15;">
            <div class="date-label">The Moment</div>
            <div class="call-card">
                <div style="font-size:26px; font-weight: 500;">æ›¾â˜ï¸ğŸ’—</div>
                <div style="font-size:12px; color:#888; margin-bottom:25px;">2025/04/24 å‡Œæ™¨ 03:14</div>
                <p style="font-style:italic; color:var(--accent); font-size:22px; font-family: 'Noto Serif TC', serif; margin:0;">ã€Œæœ€å¾Œï¼Œæˆ‘å€‘åœ¨ä¸€èµ·äº†ã€‚ã€</p>
            </div>
        </div>

        <div class="page" style="--z: 14;">
            <div class="date-label">Present</div>
            <div id="flower-zone" onclick="playSurpriseVideo()" style="cursor:pointer; text-align:center;">
                <div style="font-size:80px;" class="heart-pulse">ğŸ’</div>
                <p style="color:var(--primary); margin-top: 25px; font-weight: 500; letter-spacing: 3px;">é»æ“Šæ”¶ä¸‹èŠ±ï¼Œçœ‹æœ€å¾Œçš„å¿ƒæ„</p>
            </div>
            <div id="letter">
                <p style="font-weight: 700; color: var(--primary); font-size: 1.25rem;">ã€Œæˆ‘ç™¼ç¾é€™å€‹äººçœŸçš„æ˜¯æˆ‘çš„100åˆ†å¥³å­©ã€‚ã€</p>
                <p>å¦³åšçš„é€™å€‹æ±ºå®šï¼Œ<br>æˆ‘çµ•å°ä¸æœƒè®“å¦³å¾Œæ‚”ã€‚</p>
                <p style="color:#e63946; font-size:1.8em; font-weight:bold; margin-top:30px !important; letter-spacing: 4px; text-align: center;">æˆ‘æ„›å¦³ï¼Œæ›¾â˜ï¸ğŸ’—</p>
            </div>
        </div>

        <div class="nav-controls" id="navControls">
            <button class="btn" id="prevBtn" onclick="prevPage()" disabled>PREV</button>
            <button class="btn" id="nextBtn" onclick="nextPage()">NEXT</button>
        </div>
    </div>

    <script>
        let curr = 0;
        const pages = document.querySelectorAll('.page');
        const m1 = document.getElementById('music-1');
        const m2 = document.getElementById('music-2');

        // ã€ä¿®æ­£è™•ã€‘é€™è£¡åªå¡«å¯«å½±ç‰‡ ID (å³ e4bQwcrrN9A)
        const youtubeVideoId = "e4bQwcrrN9A"; 

        function checkPwd() {
            const input = document.getElementById('pwd').value;
            if (input === '20250424') {
                // å˜—è©¦æ’­æ”¾éŸ³æ¨‚ï¼Œä½†å³ä½¿å¤±æ•—ä¹Ÿè¦é€²å…¥é é¢
                m1.play().catch(e => console.log("éŸ³æ¨‚æ’­æ”¾å—é™ï¼Œä½†ä¸å½±éŸ¿é–‹å•Ÿ"));
                
                const overlay = document.getElementById('login-overlay');
                overlay.style.opacity = '0';
                setTimeout(() => {
                    overlay.style.display = 'none';
                    document.getElementById('myBook').style.display = 'block';
                }, 1000);
            } else { 
                alert("å¯†ç¢¼ä¸å°å–”ï¼Œå†æƒ³æƒ³çœ‹ï¼Ÿ"); 
            }
        }

        function nextPage() {
            if (curr < pages.length - 1) {
                document.querySelectorAll('.page-video').forEach(v => v.pause());
                pages[curr].classList.add('flipped');
                curr++;
                updateButtons();
            }
        }

        function prevPage() {
            if (curr > 0) {
                document.querySelectorAll('.page-video').forEach(v => v.pause());
                curr--;
                pages[curr].classList.remove('flipped');
                updateButtons();
            }
        }

        function updateButtons() {
            document.getElementById('prevBtn').disabled = (curr === 0);
            document.getElementById('nextBtn').disabled = (curr === pages.length - 1);
            if (curr === pages.length - 1) document.getElementById('navControls').style.display = 'none';
        }

        function playSurpriseVideo() {
            m1.pause();
            const container = document.getElementById('final-video-container');
            const wrapper = document.getElementById('video-wrapper');
            // åµŒå…¥ YouTube iframeï¼Œä½¿ç”¨å‰›æ‰æå–çš„ ID
            wrapper.innerHTML = `<iframe src="https://www.youtube.com/embed/${youtubeVideoId}?autoplay=1&rel=0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
            container.style.display = 'flex';
            setTimeout(() => container.style.opacity = '1', 10);
        }

        function closeFinalVideo() {
            const container = document.getElementById('final-video-container');
            container.style.opacity = '0';
            setTimeout(() => {
                container.style.display = 'none';
                document.getElementById('video-wrapper').innerHTML = ""; // ç§»é™¤ iframe
                showLetter();
            }, 1000);
        }

        function showLetter() {
            m2.play().catch(e => console.log("éŸ³æ¨‚æ’­æ”¾å—é™"));
            document.getElementById('flower-zone').style.display = 'none';
            const lt = document.getElementById('letter');
            lt.style.display = 'block';
            setTimeout(() => lt.style.opacity = '1', 100);
            const ps = lt.querySelectorAll('p');
            ps.forEach((p, i) => { setTimeout(() => p.classList.add('show-p'), i * 2000); });
        }

        // ç›£è½ Enter éµç›´æ¥ç™»å…¥
        document.getElementById('pwd').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                checkPwd();
            }
        });
    </script>
</body>
</html>